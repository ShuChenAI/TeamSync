graph TB
    subgraph ClientTier["ğŸ‘¥ å®¢æˆ¶ç«¯å±¤ - Client Layer"]
        direction LR
        WebApp["ğŸŒ Web Application<br/>React/Vue + Jitsi IFrame API<br/>è¦–è¨Šæœƒè­°ä»‹é¢æ•´åˆ"]
        WebAudio["ğŸ¤ Web Audio API<br/>MediaRecorder API<br/>å³æ™‚éŸ³è¨Šä¸²æµæ“·å–"]
    end

    subgraph GatewayTier["ğŸšª API é–˜é“å±¤ - Gateway Layer"]
        direction LR
        FastAPI["ğŸ“¹ FastAPI Server<br/>Port 8888<br/>RESTful API + JWT Auth<br/>æœƒè­°ç®¡ç†èˆ‡æ¬Šé™æ§åˆ¶"]
        WSServer["ğŸ™ï¸ WebSocket Server<br/>Socket.io/SignalR<br/>å³æ™‚é›™å‘é€šè¨Š<br/>éŸ³è¨Šä¸²æµè™•ç†"]
    end

    subgraph VideoTier["ğŸ“¹ è¦–è¨Šæœå‹™å±¤ - Video Conference Layer"]
        direction LR
        JitsiWeb["ğŸŒ Jitsi Meet Web<br/>HTTPS Port 443<br/>WebRTC ä¿¡ä»¤ä¼ºæœå™¨<br/>æœƒè­°å®¤ç®¡ç†ä»‹é¢"]
        Prosody["ğŸ’¬ Prosody XMPP Server<br/>Port 5222/5269<br/>å³æ™‚è¨Šæ¯è·¯ç”±<br/>ä½¿ç”¨è€…ç‹€æ…‹ç®¡ç†"]
        Jicofo["ğŸ¯ Jicofo<br/>Port 8888<br/>æœƒè­°ç„¦é»æ§åˆ¶å™¨<br/>åª’é«”å”å•†èˆ‡æˆ¿é–“ç®¡ç†"]
        JVB["ğŸ¥ Jitsi Videobridge<br/>UDP Port 10000<br/>WebRTC åª’é«”ä¼ºæœå™¨<br/>è¦–è¨Š/éŸ³è¨Šæ··æµè™•ç†"]

        JitsiWeb -.->|XMPP| Prosody
        Jicofo -.->|XMPP Control| Prosody
        JVB -.->|Bridge Channel| Jicofo
    end

    subgraph CloudTier["â˜ï¸ é›²ç«¯æœå‹™å±¤ - Cloud Services"]
        direction LR
        AWS["ğŸŒ AWS Transcribe<br/>å³æ™‚èªéŸ³è½‰æ–‡å­— API<br/>æ”¯æ´å¤šèªè¨€è­˜åˆ¥<br/>ä¸²æµè½‰éŒ„è™•ç†"]
    end

    subgraph ProcessingTier["âš™ï¸ è™•ç†å±¤ - Processing Layer"]
        direction LR
        subgraph AICore["ğŸ¤– AI æ™ºèƒ½æ ¸å¿ƒ - AI Core"]
            AIEngine["ğŸ¤– LangChain Framework<br/>GPT-4/Claude API<br/>æ–‡æœ¬ç³¾éŒ¯èˆ‡å„ªåŒ–<br/>æœƒè­°æ‘˜è¦ç”Ÿæˆ"]
            Qdrant[("ğŸ” Qdrant Vector DB<br/>Port 6333<br/>èªç¾©æœç´¢å¼•æ“<br/>æœƒè­°è¨˜éŒ„å‘é‡åŒ–å­˜å„²")]
            Redis[("ğŸ’¾ Redis Cache<br/>Port 6379<br/>å³æ™‚è½‰éŒ„ç·©å­˜<br/>æœƒè©±ç‹€æ…‹ç®¡ç†")]

            AIEngine <-->|å‘é‡æœç´¢| Qdrant
            AIEngine <-->|å¿«å–å­˜å–| Redis
        end

        subgraph Translation["ğŸŒ å¤šèªè¨€ç¿»è­¯æœå‹™ - Translation Service"]
            TransSvc["ğŸŒ Translation Gateway<br/>çµ±ä¸€ç¿»è­¯ä»‹é¢<br/>èªè¨€è‡ªå‹•æª¢æ¸¬"]
            Google["Google Translate API<br/>100+ èªè¨€æ”¯æ´<br/>ç¥ç¶“æ©Ÿå™¨ç¿»è­¯"]
            DeepL["DeepL Pro API<br/>é«˜å“è³ªç¿»è­¯<br/>å°ˆæ¥­è¡“èªè™•ç†"]

            TransSvc -->|ä¸»è¦| Google
            TransSvc -.->|å‚™æ´| DeepL
        end
    end

    subgraph MessageTier["ğŸ“¡ è¨Šæ¯å±¤ - Message Layer"]
        MQTT["ğŸ“¡ Mosquitto MQTT Broker<br/>Port 1883/8883 (SSL)<br/>å³æ™‚è¨Šæ¯ç™¼å¸ƒè¨‚é–±<br/>å¤šå®¢æˆ¶ç«¯åŒæ­¥"]
    end

    %% Main flow connections with detailed labels
    WebApp -->|"1. è«‹æ±‚æœƒè­°<br/>Meeting Request"| FastAPI
    FastAPI -->|"2. JWT Token<br/>æˆæ¬Šæ†‘è­‰"| JitsiWeb
    WebApp -->|"3. WebRTC é€£ç·š<br/>P2P/SFU Stream"| JVB

    WebAudio -->|"4. éŸ³è¨Šä¸²æµ<br/>Audio Stream<br/>16kHz PCM"| WSServer
    WSServer -->|"5. ç°½å URL<br/>Presigned URL<br/>AWS Auth"| AWS
    AWS -->|"6. å³æ™‚è½‰éŒ„<br/>Live Transcription<br/>JSON Format"| WSServer

    WSServer -->|"7. åŸå§‹æ–‡æœ¬<br/>Raw Transcript"| AIEngine
    AIEngine -->|"8. ä¿®æ­£æ–‡æœ¬<br/>Corrected Text<br/>+ Summary"| TransSvc
    TransSvc -->|"9. ç™¼å¸ƒçµæœ<br/>Publish Results<br/>Multi-language"| MQTT
    MQTT -->|"10. è¨‚é–±æ›´æ–°<br/>Subscribe Updates<br/>Real-time Sync"| WebApp

    classDef client fill:#ffcccc,stroke:#ff6666,stroke-width:2px
    classDef gateway fill:#ccffcc,stroke:#66cc66,stroke-width:2px
    classDef video fill:#ffd9b3,stroke:#ff8800,stroke-width:2px
    classDef cloud fill:#e6f3ff,stroke:#0066cc,stroke-width:2px
    classDef ai fill:#ccccff,stroke:#6666ff,stroke-width:2px
    classDef message fill:#fff2cc,stroke:#d6b656,stroke-width:2px

    class WebApp,WebAudio client
    class FastAPI,WSServer gateway
    class JitsiWeb,Jicofo,JVB,Prosody video
    class AWS cloud
    class AIEngine,Qdrant,Redis,TransSvc,Google,DeepL ai
    class MQTT message 